<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Integrando SafeID para importar/exportar usuários com o Active Directory" /><meta name="author" content="Helvio Junior (m4v3r1ck)" /><meta property="og:locale" content="en_US" /><meta name="description" content="O Objetivo deste post é demonstrar passo a passo como realizar toda a configuração do SafeID (gestão de identidades e acessos - identity and access manager) para a publicação dos usuários cadastrados para o Microsoft Active Directory. Entendendo o SafeID Antes da configuração propriamente dita é necessário entender um pouco da estrutura de dados do SafeID, através do post Entendendo o SafeID Depois da leitura deste post com as informações básicas do SafeID podemos iniciar com as configurações. Para que este post seja o mais completo possível será utilizado um ambiente totalmente linpo, ou seja recém instalado. 1 - Configurando o proxy Acesse o painel de administração do SafeID, clique em Menu &gt; Proxy &gt; Gerenciador de proxies Depois clique no botão Novo Proxy Digite o nome do proxy e clique em Adicionar. Para instalar este proxy em seu servidor clique no link Download (instalador e configuração) para realizar o download dos executáveis e configuração do proxy. &nbsp; &nbsp; Dentro do seu servidor descompacte o arquivo ZIP gerado em um diretório de preferência. &nbsp; Execute o arquivo _Install.cmd para realizar a instalação do proxy como serviço. Reinicie o serviço do proxy Após reiniciado se tudo tiver correto na console de administração você verá a informação que o proxy está on-line, ou seja conectado ao servidor. 2 - Configurando os campos Os campos serão utilizados para que possamos mapear os dados de entrada (neste exemplo as colunas do arquivo CSV) com o padrão do SafeID. No painel de administração do SafeID, clique em Menu &gt; Campos &gt; Gerenciador de campos Na tela acima podemos observar a listagem dos campos cadastrados por padrão no sistema, caso deseje adicionar outro campo clique no botão Novo campo. Na configuração de cada campo há 2 opções: Público e permite edição, a primeira indica de outros usuários poderão visualizar essa informação, e o segundo se o usuário em questão poderá alterar essa informação. 3 - Configurando o recurso Recurso é o nome dado para o sistema de origem/destino de onde os dados serão importados ou para onde serão publicados. No painel de administração do SafeID, clique em Menu &gt; Recurso&gt; Novo recurso Na tela de criação de recurso será necessário informar 3 campos, o primeiro é o nome do recurso, segundo é o contexto do qual ele faz parte e por último qual será o proxy que fará a comunicação entre o SafeID e este recurso. 4 - Integrando o recurso versus plugin A tela final de configuração, também a mais complexa, contém diversos passos para que seja realizada a integração do recurso com o SafeID. Neste passo informaremos através de qual plugin desejamos realizar a integração entre o SafeID com o recurso cadastrado no passo anterior. Esta tela tem diversas configurações que serão explicadas uma a uma a seguir. 4.1 - Configurações gerais Para criar este vínculo, clique em Menu &gt; Recurso x plugin&gt; Novo recurso x plugin Nesta tela há o início da configuração, onde existe 3 campos a serem cadastrados: O primeiro é o recurso, seguido do plugin (no nosso caso o plugin de integração com Active Directory) e por último o domínio de e-mail. Após informar estes campos clique em Salvar e continuar. Logo após serão exibidas diversas informações e opções de configuração, porém neste momento iremos nos ater a finalizar as configurações gerais. Segue abaixo a explicação de cada uma destas opções: Permite adição de entidade: Como sta integração que estamos realizando tem por objetivo capturar os usuários do CSV e importa-los no SafeID, será necessário habilitar que os dados vindos deste recurso versus plugin possa inserir entidade. Caso esta opção esteja desabilitada o SafeID não será capaz de adicionar novos usuários (Entidades), porém caso exista uma entidade que se enquadre nas regras (mapeamento de campos) que serão configuradas posteriormente, o SafeID irá criar uma nova identidade na entidade existente; Criação de login: Permite que o SafeID crie um login de usuário caso não exista;  Criação de e-mail: Permite que o SafeID crie um e-mail de usuário caso não exista; Habilita importação: Habilita que o SafeID resgate dados através deste plugin. Após selecionas as opções desejadas clique em Salvar. Agora clique na opção Saída e depois em Editar Realize as configurações conforme desejado e clique em Salvar Para finalizar as configurações gerais clique em Campos e posteriormente Editar e configure os campos conforme abaixo e clique em Salvar 4.2 - Entendendo a tela de recurso versus plugin Nesta tela tem-se basicamente 2 quadros, o primeiro com informações das configurações e status importantes, e na segunda as configurações/ações possíveis Segue a explicação de cada um dos itens do quadrante de informações, posteriormente realizaremos as configurações dos que ainda não realizamos: Status: Mostra o status atual deste recurso x plugin; Status do recurso: Mostra o status do recurso cadastrado; Status do proxy: Mostra se o proxy está online, ou seja, conectado neste momento; Configurações gerais: Mostra se as configurações estão completas ou se falta algo. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente. Parâmetros do plugin: Cada plugin necessita e exige uma configuração diferente, desta forma essa tela será diferente para cada um dos plugins que o sistema integra. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente. Mapeamento de campos: Nesta tela que iremos efetivamente mapear os campos do sistema remoto com os campos internos do SafeID. Estes campos servem para que haja uma padronização e entendimento das informações obtidas no sistema remoto. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente. O quadrante de configurações/ações estão os links para cada uma das ações e configurações possíveis para este recurso x plugin. 4.3 - Parâmetros do plugin Conforme descrito anteriormente cada plugin exige uma configuração diferenciada nesta tela. Para o plugin de AD há somente 3 configurações: Servidor AD: IP ou nome do servidor AD; Usuário: Usuário com direitos para criar, editar e excluir (Unidade organizacional, Grupo e usuários) Senha: Senha do usuário. Clique em editar e configure essa tela conforme suas informações e posteriormente clique em Salvar 4.4 - Mapeamento de campos Para mapeamento de campos há 2 opções: O mapeamento manual onde é necessário conhecer exatamente os parâmetros (campos) do sistema que estamos integrando; A opção automatizada onde o SafeID, através do seu proxy, se conecta no sistema que estamos integrando e coleta essas informações. Mapeamento manual Dentro do recurso x plugin clique no link Mapeamento de campos, depois no botão Editar Digite o nome do campo cadastrado no SafeID e selecione o campo desejado. (Caso deseje cadastrar um novo campo basta ir em Menu &gt; Campos &gt; Novo Campo) Ao selecionar o campo desejado as opções do campo serão exibidas. Segue a explicação de cada uma das opções do mapeamento do campo: Campo do recurso: nome do campo exatamente como o sistema integrado informa (este campo diferencia maiúsculo de minúsculo) É um identificador: Indica que o campo é um identificador no sistema integrado; É senha: Indica que o campo detém uma senha, ao importar a senha do usuário será sempre substituída por essa deste campo; É um campo único: Indica que o campo é único, ou seja, não pode haver duplicidade dentre da base do SafeID no mesmo contexto. Obs.: Para que o SafeID identifique se os dados importados são de uma entidade (usuário) existente ou de uma nova entidade, ele utiliza estes campos marcados como Identificador e campo único. Para completar a operação basta clicar em Salvar Mapeamento automatizado Para que este mapeamento funcione corretamente as configurações gerais e os parâmetros de configuração devem estar configurados e corretos, bem como o proxy precisa estar on-line. Dentro do recurso x plugin clique no link Mapeamento de campos, depois no botão Busca automática e depois no botão Iniciar nova busca Neste momento o procedimento de busca será iniciado e a informação de aguardando as informações do proxy será informado Aguarde alguns instantes e atualize a tela. Caso o procedimento apresente erro uma informação de erro será exibida e os detalhes do erro poderão ser vistos no botão de Log, caso o procedimento seja realizado com sucesso a tela abaixo será exibida Para abrir as informações mapeadas clique no botão Abrir, uma tabela com as informações mapeadas será exibida. Pode observar que além das colunas (campos do sistema) são exibidos alguns exemplos de valor do campo. Mapeie os campos conforme desejado e clique em Salvar. Caso haja algum campo que não deseje mapear basta clicar no botão excluir que o mesmo será desconsiderado no mapeamento. Obs.: É obrigatório a seleção de pelo menos um campo como identificador ou único. Para o nosso exemplo o seguinte mapeamento foi realizado 4.5 - Agendamento Dentro do recurso x plugin clique no link Agendamento e clique no botão Editar. Cadastre o agendamento conforme a tela abaixo e clique em salvar. 4.6 - Outras configurações De configurações obrigatórios são essas demonstradas acima, outras configurações podem ser realizadas como vínculo com função, e regras de bloqueio. Porém estas não serão abordadas neste post. 4.7 - Habilitando recurso versus plugin Estando toda a configuração completa o plugin pode ser habilitado. Para isso ainda dentro do recurso x plugin clique no link Habilitar. 5 - Teste de importação Após todas as configurações realizadas ainda dentro do recurso x plugin clique no link Publicar agora, para forçar que toda a configuração seja replicada com o proxy. 5.1 - Verificando logs Para verificar se tudo está ocorrendo conforme desejado é possível visualizar os logs do sistema em Menu &gt; Sistema &gt; Visualizador de logs do sistema 5.1 - Visualizando usuários Como em nosso teste todas as importações ocorreram com sucesso podemos visualizar os dados dos usuários (Entidades e Identidades) em Menu &gt; Gerenciador de usuários Clicando em um usuário recém importado podemos observar todas suas informações. 5 - Dúvidas? Caso tenha alguma dúvida favor entrar em contato conosco através do link www.safetrend.com.br/contato/" /><meta property="og:description" content="O Objetivo deste post é demonstrar passo a passo como realizar toda a configuração do SafeID (gestão de identidades e acessos - identity and access manager) para a publicação dos usuários cadastrados para o Microsoft Active Directory. Entendendo o SafeID Antes da configuração propriamente dita é necessário entender um pouco da estrutura de dados do SafeID, através do post Entendendo o SafeID Depois da leitura deste post com as informações básicas do SafeID podemos iniciar com as configurações. Para que este post seja o mais completo possível será utilizado um ambiente totalmente linpo, ou seja recém instalado. 1 - Configurando o proxy Acesse o painel de administração do SafeID, clique em Menu &gt; Proxy &gt; Gerenciador de proxies Depois clique no botão Novo Proxy Digite o nome do proxy e clique em Adicionar. Para instalar este proxy em seu servidor clique no link Download (instalador e configuração) para realizar o download dos executáveis e configuração do proxy. &nbsp; &nbsp; Dentro do seu servidor descompacte o arquivo ZIP gerado em um diretório de preferência. &nbsp; Execute o arquivo _Install.cmd para realizar a instalação do proxy como serviço. Reinicie o serviço do proxy Após reiniciado se tudo tiver correto na console de administração você verá a informação que o proxy está on-line, ou seja conectado ao servidor. 2 - Configurando os campos Os campos serão utilizados para que possamos mapear os dados de entrada (neste exemplo as colunas do arquivo CSV) com o padrão do SafeID. No painel de administração do SafeID, clique em Menu &gt; Campos &gt; Gerenciador de campos Na tela acima podemos observar a listagem dos campos cadastrados por padrão no sistema, caso deseje adicionar outro campo clique no botão Novo campo. Na configuração de cada campo há 2 opções: Público e permite edição, a primeira indica de outros usuários poderão visualizar essa informação, e o segundo se o usuário em questão poderá alterar essa informação. 3 - Configurando o recurso Recurso é o nome dado para o sistema de origem/destino de onde os dados serão importados ou para onde serão publicados. No painel de administração do SafeID, clique em Menu &gt; Recurso&gt; Novo recurso Na tela de criação de recurso será necessário informar 3 campos, o primeiro é o nome do recurso, segundo é o contexto do qual ele faz parte e por último qual será o proxy que fará a comunicação entre o SafeID e este recurso. 4 - Integrando o recurso versus plugin A tela final de configuração, também a mais complexa, contém diversos passos para que seja realizada a integração do recurso com o SafeID. Neste passo informaremos através de qual plugin desejamos realizar a integração entre o SafeID com o recurso cadastrado no passo anterior. Esta tela tem diversas configurações que serão explicadas uma a uma a seguir. 4.1 - Configurações gerais Para criar este vínculo, clique em Menu &gt; Recurso x plugin&gt; Novo recurso x plugin Nesta tela há o início da configuração, onde existe 3 campos a serem cadastrados: O primeiro é o recurso, seguido do plugin (no nosso caso o plugin de integração com Active Directory) e por último o domínio de e-mail. Após informar estes campos clique em Salvar e continuar. Logo após serão exibidas diversas informações e opções de configuração, porém neste momento iremos nos ater a finalizar as configurações gerais. Segue abaixo a explicação de cada uma destas opções: Permite adição de entidade: Como sta integração que estamos realizando tem por objetivo capturar os usuários do CSV e importa-los no SafeID, será necessário habilitar que os dados vindos deste recurso versus plugin possa inserir entidade. Caso esta opção esteja desabilitada o SafeID não será capaz de adicionar novos usuários (Entidades), porém caso exista uma entidade que se enquadre nas regras (mapeamento de campos) que serão configuradas posteriormente, o SafeID irá criar uma nova identidade na entidade existente; Criação de login: Permite que o SafeID crie um login de usuário caso não exista;  Criação de e-mail: Permite que o SafeID crie um e-mail de usuário caso não exista; Habilita importação: Habilita que o SafeID resgate dados através deste plugin. Após selecionas as opções desejadas clique em Salvar. Agora clique na opção Saída e depois em Editar Realize as configurações conforme desejado e clique em Salvar Para finalizar as configurações gerais clique em Campos e posteriormente Editar e configure os campos conforme abaixo e clique em Salvar 4.2 - Entendendo a tela de recurso versus plugin Nesta tela tem-se basicamente 2 quadros, o primeiro com informações das configurações e status importantes, e na segunda as configurações/ações possíveis Segue a explicação de cada um dos itens do quadrante de informações, posteriormente realizaremos as configurações dos que ainda não realizamos: Status: Mostra o status atual deste recurso x plugin; Status do recurso: Mostra o status do recurso cadastrado; Status do proxy: Mostra se o proxy está online, ou seja, conectado neste momento; Configurações gerais: Mostra se as configurações estão completas ou se falta algo. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente. Parâmetros do plugin: Cada plugin necessita e exige uma configuração diferente, desta forma essa tela será diferente para cada um dos plugins que o sistema integra. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente. Mapeamento de campos: Nesta tela que iremos efetivamente mapear os campos do sistema remoto com os campos internos do SafeID. Estes campos servem para que haja uma padronização e entendimento das informações obtidas no sistema remoto. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente. O quadrante de configurações/ações estão os links para cada uma das ações e configurações possíveis para este recurso x plugin. 4.3 - Parâmetros do plugin Conforme descrito anteriormente cada plugin exige uma configuração diferenciada nesta tela. Para o plugin de AD há somente 3 configurações: Servidor AD: IP ou nome do servidor AD; Usuário: Usuário com direitos para criar, editar e excluir (Unidade organizacional, Grupo e usuários) Senha: Senha do usuário. Clique em editar e configure essa tela conforme suas informações e posteriormente clique em Salvar 4.4 - Mapeamento de campos Para mapeamento de campos há 2 opções: O mapeamento manual onde é necessário conhecer exatamente os parâmetros (campos) do sistema que estamos integrando; A opção automatizada onde o SafeID, através do seu proxy, se conecta no sistema que estamos integrando e coleta essas informações. Mapeamento manual Dentro do recurso x plugin clique no link Mapeamento de campos, depois no botão Editar Digite o nome do campo cadastrado no SafeID e selecione o campo desejado. (Caso deseje cadastrar um novo campo basta ir em Menu &gt; Campos &gt; Novo Campo) Ao selecionar o campo desejado as opções do campo serão exibidas. Segue a explicação de cada uma das opções do mapeamento do campo: Campo do recurso: nome do campo exatamente como o sistema integrado informa (este campo diferencia maiúsculo de minúsculo) É um identificador: Indica que o campo é um identificador no sistema integrado; É senha: Indica que o campo detém uma senha, ao importar a senha do usuário será sempre substituída por essa deste campo; É um campo único: Indica que o campo é único, ou seja, não pode haver duplicidade dentre da base do SafeID no mesmo contexto. Obs.: Para que o SafeID identifique se os dados importados são de uma entidade (usuário) existente ou de uma nova entidade, ele utiliza estes campos marcados como Identificador e campo único. Para completar a operação basta clicar em Salvar Mapeamento automatizado Para que este mapeamento funcione corretamente as configurações gerais e os parâmetros de configuração devem estar configurados e corretos, bem como o proxy precisa estar on-line. Dentro do recurso x plugin clique no link Mapeamento de campos, depois no botão Busca automática e depois no botão Iniciar nova busca Neste momento o procedimento de busca será iniciado e a informação de aguardando as informações do proxy será informado Aguarde alguns instantes e atualize a tela. Caso o procedimento apresente erro uma informação de erro será exibida e os detalhes do erro poderão ser vistos no botão de Log, caso o procedimento seja realizado com sucesso a tela abaixo será exibida Para abrir as informações mapeadas clique no botão Abrir, uma tabela com as informações mapeadas será exibida. Pode observar que além das colunas (campos do sistema) são exibidos alguns exemplos de valor do campo. Mapeie os campos conforme desejado e clique em Salvar. Caso haja algum campo que não deseje mapear basta clicar no botão excluir que o mesmo será desconsiderado no mapeamento. Obs.: É obrigatório a seleção de pelo menos um campo como identificador ou único. Para o nosso exemplo o seguinte mapeamento foi realizado 4.5 - Agendamento Dentro do recurso x plugin clique no link Agendamento e clique no botão Editar. Cadastre o agendamento conforme a tela abaixo e clique em salvar. 4.6 - Outras configurações De configurações obrigatórios são essas demonstradas acima, outras configurações podem ser realizadas como vínculo com função, e regras de bloqueio. Porém estas não serão abordadas neste post. 4.7 - Habilitando recurso versus plugin Estando toda a configuração completa o plugin pode ser habilitado. Para isso ainda dentro do recurso x plugin clique no link Habilitar. 5 - Teste de importação Após todas as configurações realizadas ainda dentro do recurso x plugin clique no link Publicar agora, para forçar que toda a configuração seja replicada com o proxy. 5.1 - Verificando logs Para verificar se tudo está ocorrendo conforme desejado é possível visualizar os logs do sistema em Menu &gt; Sistema &gt; Visualizador de logs do sistema 5.1 - Visualizando usuários Como em nosso teste todas as importações ocorreram com sucesso podemos visualizar os dados dos usuários (Entidades e Identidades) em Menu &gt; Gerenciador de usuários Clicando em um usuário recém importado podemos observar todas suas informações. 5 - Dúvidas? Caso tenha alguma dúvida favor entrar em contato conosco através do link www.safetrend.com.br/contato/" /><link rel="canonical" href="https://www.helviojunior.com.br/safetrend/safeid/integrando-safeid-com-ad/" /><meta property="og:url" content="https://www.helviojunior.com.br/safetrend/safeid/integrando-safeid-com-ad/" /><meta property="og:site_name" content="Helvio Junior" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2014-04-15T13:30:27-03:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Integrando SafeID para importar/exportar usuários com o Active Directory" /><meta name="twitter:site" content="@helvioju" /><meta name="twitter:creator" content="@Helvio Junior (m4v3r1ck)" /><meta name="google-site-verification" content="JR4IIP9jfvOwxn2ybV_Qn0SrtDPlTrKomdPWgBuP55k"" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Helvio Junior (m4v3r1ck)"},"dateModified":"2023-08-17T00:19:29-03:00","datePublished":"2014-04-15T13:30:27-03:00","description":"O Objetivo deste post é demonstrar passo a passo como realizar toda a configuração do SafeID (gestão de identidades e acessos - identity and access manager) para a publicação dos usuários cadastrados para o Microsoft Active Directory. Entendendo o SafeID Antes da configuração propriamente dita é necessário entender um pouco da estrutura de dados do SafeID, através do post Entendendo o SafeID Depois da leitura deste post com as informações básicas do SafeID podemos iniciar com as configurações. Para que este post seja o mais completo possível será utilizado um ambiente totalmente linpo, ou seja recém instalado. 1 - Configurando o proxy Acesse o painel de administração do SafeID, clique em Menu &gt; Proxy &gt; Gerenciador de proxies Depois clique no botão Novo Proxy Digite o nome do proxy e clique em Adicionar. Para instalar este proxy em seu servidor clique no link Download (instalador e configuração) para realizar o download dos executáveis e configuração do proxy. &nbsp; &nbsp; Dentro do seu servidor descompacte o arquivo ZIP gerado em um diretório de preferência. &nbsp; Execute o arquivo _Install.cmd para realizar a instalação do proxy como serviço. Reinicie o serviço do proxy Após reiniciado se tudo tiver correto na console de administração você verá a informação que o proxy está on-line, ou seja conectado ao servidor. 2 - Configurando os campos Os campos serão utilizados para que possamos mapear os dados de entrada (neste exemplo as colunas do arquivo CSV) com o padrão do SafeID. No painel de administração do SafeID, clique em Menu &gt; Campos &gt; Gerenciador de campos Na tela acima podemos observar a listagem dos campos cadastrados por padrão no sistema, caso deseje adicionar outro campo clique no botão Novo campo. Na configuração de cada campo há 2 opções: Público e permite edição, a primeira indica de outros usuários poderão visualizar essa informação, e o segundo se o usuário em questão poderá alterar essa informação. 3 - Configurando o recurso Recurso é o nome dado para o sistema de origem/destino de onde os dados serão importados ou para onde serão publicados. No painel de administração do SafeID, clique em Menu &gt; Recurso&gt; Novo recurso Na tela de criação de recurso será necessário informar 3 campos, o primeiro é o nome do recurso, segundo é o contexto do qual ele faz parte e por último qual será o proxy que fará a comunicação entre o SafeID e este recurso. 4 - Integrando o recurso versus plugin A tela final de configuração, também a mais complexa, contém diversos passos para que seja realizada a integração do recurso com o SafeID. Neste passo informaremos através de qual plugin desejamos realizar a integração entre o SafeID com o recurso cadastrado no passo anterior. Esta tela tem diversas configurações que serão explicadas uma a uma a seguir. 4.1 - Configurações gerais Para criar este vínculo, clique em Menu &gt; Recurso x plugin&gt; Novo recurso x plugin Nesta tela há o início da configuração, onde existe 3 campos a serem cadastrados: O primeiro é o recurso, seguido do plugin (no nosso caso o plugin de integração com Active Directory) e por último o domínio de e-mail. Após informar estes campos clique em Salvar e continuar. Logo após serão exibidas diversas informações e opções de configuração, porém neste momento iremos nos ater a finalizar as configurações gerais. Segue abaixo a explicação de cada uma destas opções: Permite adição de entidade: Como sta integração que estamos realizando tem por objetivo capturar os usuários do CSV e importa-los no SafeID, será necessário habilitar que os dados vindos deste recurso versus plugin possa inserir entidade. Caso esta opção esteja desabilitada o SafeID não será capaz de adicionar novos usuários (Entidades), porém caso exista uma entidade que se enquadre nas regras (mapeamento de campos) que serão configuradas posteriormente, o SafeID irá criar uma nova identidade na entidade existente; Criação de login: Permite que o SafeID crie um login de usuário caso não exista;  Criação de e-mail: Permite que o SafeID crie um e-mail de usuário caso não exista; Habilita importação: Habilita que o SafeID resgate dados através deste plugin. Após selecionas as opções desejadas clique em Salvar. Agora clique na opção Saída e depois em Editar Realize as configurações conforme desejado e clique em Salvar Para finalizar as configurações gerais clique em Campos e posteriormente Editar e configure os campos conforme abaixo e clique em Salvar 4.2 - Entendendo a tela de recurso versus plugin Nesta tela tem-se basicamente 2 quadros, o primeiro com informações das configurações e status importantes, e na segunda as configurações/ações possíveis Segue a explicação de cada um dos itens do quadrante de informações, posteriormente realizaremos as configurações dos que ainda não realizamos: Status: Mostra o status atual deste recurso x plugin; Status do recurso: Mostra o status do recurso cadastrado; Status do proxy: Mostra se o proxy está online, ou seja, conectado neste momento; Configurações gerais: Mostra se as configurações estão completas ou se falta algo. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente. Parâmetros do plugin: Cada plugin necessita e exige uma configuração diferente, desta forma essa tela será diferente para cada um dos plugins que o sistema integra. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente. Mapeamento de campos: Nesta tela que iremos efetivamente mapear os campos do sistema remoto com os campos internos do SafeID. Estes campos servem para que haja uma padronização e entendimento das informações obtidas no sistema remoto. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente. O quadrante de configurações/ações estão os links para cada uma das ações e configurações possíveis para este recurso x plugin. 4.3 - Parâmetros do plugin Conforme descrito anteriormente cada plugin exige uma configuração diferenciada nesta tela. Para o plugin de AD há somente 3 configurações: Servidor AD: IP ou nome do servidor AD; Usuário: Usuário com direitos para criar, editar e excluir (Unidade organizacional, Grupo e usuários) Senha: Senha do usuário. Clique em editar e configure essa tela conforme suas informações e posteriormente clique em Salvar 4.4 - Mapeamento de campos Para mapeamento de campos há 2 opções: O mapeamento manual onde é necessário conhecer exatamente os parâmetros (campos) do sistema que estamos integrando; A opção automatizada onde o SafeID, através do seu proxy, se conecta no sistema que estamos integrando e coleta essas informações. Mapeamento manual Dentro do recurso x plugin clique no link Mapeamento de campos, depois no botão Editar Digite o nome do campo cadastrado no SafeID e selecione o campo desejado. (Caso deseje cadastrar um novo campo basta ir em Menu &gt; Campos &gt; Novo Campo) Ao selecionar o campo desejado as opções do campo serão exibidas. Segue a explicação de cada uma das opções do mapeamento do campo: Campo do recurso: nome do campo exatamente como o sistema integrado informa (este campo diferencia maiúsculo de minúsculo) É um identificador: Indica que o campo é um identificador no sistema integrado; É senha: Indica que o campo detém uma senha, ao importar a senha do usuário será sempre substituída por essa deste campo; É um campo único: Indica que o campo é único, ou seja, não pode haver duplicidade dentre da base do SafeID no mesmo contexto. Obs.: Para que o SafeID identifique se os dados importados são de uma entidade (usuário) existente ou de uma nova entidade, ele utiliza estes campos marcados como Identificador e campo único. Para completar a operação basta clicar em Salvar Mapeamento automatizado Para que este mapeamento funcione corretamente as configurações gerais e os parâmetros de configuração devem estar configurados e corretos, bem como o proxy precisa estar on-line. Dentro do recurso x plugin clique no link Mapeamento de campos, depois no botão Busca automática e depois no botão Iniciar nova busca Neste momento o procedimento de busca será iniciado e a informação de aguardando as informações do proxy será informado Aguarde alguns instantes e atualize a tela. Caso o procedimento apresente erro uma informação de erro será exibida e os detalhes do erro poderão ser vistos no botão de Log, caso o procedimento seja realizado com sucesso a tela abaixo será exibida Para abrir as informações mapeadas clique no botão Abrir, uma tabela com as informações mapeadas será exibida. Pode observar que além das colunas (campos do sistema) são exibidos alguns exemplos de valor do campo. Mapeie os campos conforme desejado e clique em Salvar. Caso haja algum campo que não deseje mapear basta clicar no botão excluir que o mesmo será desconsiderado no mapeamento. Obs.: É obrigatório a seleção de pelo menos um campo como identificador ou único. Para o nosso exemplo o seguinte mapeamento foi realizado 4.5 - Agendamento Dentro do recurso x plugin clique no link Agendamento e clique no botão Editar. Cadastre o agendamento conforme a tela abaixo e clique em salvar. 4.6 - Outras configurações De configurações obrigatórios são essas demonstradas acima, outras configurações podem ser realizadas como vínculo com função, e regras de bloqueio. Porém estas não serão abordadas neste post. 4.7 - Habilitando recurso versus plugin Estando toda a configuração completa o plugin pode ser habilitado. Para isso ainda dentro do recurso x plugin clique no link Habilitar. 5 - Teste de importação Após todas as configurações realizadas ainda dentro do recurso x plugin clique no link Publicar agora, para forçar que toda a configuração seja replicada com o proxy. 5.1 - Verificando logs Para verificar se tudo está ocorrendo conforme desejado é possível visualizar os logs do sistema em Menu &gt; Sistema &gt; Visualizador de logs do sistema 5.1 - Visualizando usuários Como em nosso teste todas as importações ocorreram com sucesso podemos visualizar os dados dos usuários (Entidades e Identidades) em Menu &gt; Gerenciador de usuários Clicando em um usuário recém importado podemos observar todas suas informações. 5 - Dúvidas? Caso tenha alguma dúvida favor entrar em contato conosco através do link www.safetrend.com.br/contato/","headline":"Integrando SafeID para importar/exportar usuários com o Active Directory","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.helviojunior.com.br/safetrend/safeid/integrando-safeid-com-ad/"},"url":"https://www.helviojunior.com.br/safetrend/safeid/integrando-safeid-com-ad/"}</script><title>Integrando SafeID para importar/exportar usuários com o Active Directory | Helvio Junior</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Helvio Junior"><meta name="application-name" content="Helvio Junior"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/m4v3r1ck.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Helvio Junior</a></div><div class="site-subtitle font-italic">Cyber security researcher, speaker, low level and binary exploitation entusiast. <br /><br />"I’m just a child who has never grown up. I still keep asking these 'how' & 'why' questions. Occasionally, I find an answer. Stephen Hawking"</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://www.linkedin.com/in/helviojunior" aria-label="linkedin" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.youtube.com/@Sec4US" aria-label="youtube" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href="https://github.com/helviojunior" aria-label="github" class="order-5" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['helvio.junior','sec4us.com.br'].join('@')" aria-label="email" class="order-6" > <i class="fas fa-envelope"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/safetrend"> Safetrend </a> </span> <span> <a href="/safeid"> Safeid </a> </span> <span>Integrando SafeID para importar/exportar usuários com o Active Directory</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Integrando SafeID para importar/exportar usuários com o Active Directory</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Helvio Junior (m4v3r1ck) </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Apr 15, 2014, 1:30 PM -0300" prep="on" > Apr 15, 2014 <i class="unloaded">2014-04-15T13:30:27-03:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Aug 17, 2023, 12:19 AM -0300" prefix="Updated " > Aug 17, 2023 <i class="unloaded">2023-08-17T00:19:29-03:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1620 words">9 min</span></div></div><div class="post-content"><p>O Objetivo deste post é demonstrar passo a passo como realizar toda a configuração do SafeID (gestão de identidades e acessos - identity and access manager) para a publicação dos usuários cadastrados para o Microsoft Active Directory.</p><p></p><h2>Entendendo o SafeID</h2><p><span style="line-height: 1.5;">Antes da configuração propriamente dita é necessário entender um pouco da estrutura de dados do SafeID, através do post <a title="Entendendo a estrutura básica do SafeID" href="http://www.helviojunior.com.br/uncategorized/entendendo-o-safeid/" target="_blank">Entendendo o SafeID</a></span></p><p><span style="line-height: 1.5;">Depois da leitura deste post com as informações básicas do SafeID podemos iniciar com as configurações.</span></p><p>Para que este post seja o mais completo possível será utilizado um ambiente totalmente linpo, ou seja recém instalado.</p><h2>1 - Configurando o proxy</h2><p>Acesse o painel de administração do SafeID, clique em <strong>Menu</strong> &gt; <strong>Proxy</strong> &gt; <strong>Gerenciador de proxies</strong></p><p><a href="/assets/2014/04/001-admin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 496 283'%3E%3C/svg%3E" alt="001-admin" data-src="/assets/2014/04/001-admin.png" width="496" height="283" class="lazyload" data-proofer-ignore></a></p><p>Depois clique no botão <strong>Novo Proxy</strong></p><p><a href="/assets/2014/04/002-proxy.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 464 246'%3E%3C/svg%3E" alt="002-proxy" data-src="/assets/2014/04/002-proxy.png" width="464" height="246" class="lazyload" data-proofer-ignore></a></p><p>Digite o nome do proxy e clique em Adicionar.</p><p>Para instalar este proxy em seu servidor clique no link <strong>Download (instalador e configuração) </strong>para realizar o download dos executáveis e configuração do proxy.</p><p><a href="/assets/2014/04/004-proxy2.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 566 233'%3E%3C/svg%3E" alt="004-proxy2" data-src="/assets/2014/04/004-proxy2.png" width="566" height="233" class="lazyload" data-proofer-ignore></a></p><p>&nbsp;</p><p>&nbsp;</p><p>Dentro do seu servidor descompacte o arquivo ZIP gerado em um diretório de preferência.</p><p><a href="/assets/2014/04/004-proxy3.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 294 176'%3E%3C/svg%3E" alt="004-proxy3" data-src="/assets/2014/04/004-proxy3.png" width="294" height="176" class="lazyload" data-proofer-ignore></a></p><p>&nbsp;</p><p>Execute o arquivo <strong>_Install.cmd </strong>para realizar a instalação do proxy como serviço.</p><p>Reinicie o serviço do proxy</p><p><a href="/assets/2014/04/004-proxy4.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 583 136'%3E%3C/svg%3E" alt="004-proxy4" data-src="/assets/2014/04/004-proxy4.png" width="583" height="136" class="lazyload" data-proofer-ignore></a></p><p>Após reiniciado se tudo tiver correto na console de administração você verá a informação que o proxy está on-line, ou seja conectado ao servidor.</p><p><a href="/assets/2014/04/004-proxy1.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 569 228'%3E%3C/svg%3E" alt="004-proxy" data-src="/assets/2014/04/004-proxy1.png" width="569" height="228" class="lazyload" data-proofer-ignore></a></p><h2>2 - Configurando os campos</h2><p>Os campos serão utilizados para que possamos mapear os dados de entrada (neste exemplo as colunas do arquivo CSV) com o padrão do SafeID.</p><p>No painel de administração do SafeID, clique em <strong>Menu</strong> &gt; <b>Campos </b>&gt; <strong>Gerenciador de campos</strong></p><p><a href="/assets/2014/04/005-fields.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 709 303'%3E%3C/svg%3E" alt="005-fields" data-src="/assets/2014/04/005-fields.png" width="709" height="303" class="lazyload" data-proofer-ignore></a></p><p>Na tela acima podemos observar a listagem dos campos cadastrados por padrão no sistema, caso deseje adicionar outro campo clique no botão <strong>Novo campo. </strong>Na configuração de cada campo há 2 opções: Público e permite edição, a primeira indica de outros usuários poderão visualizar essa informação, e o segundo se o usuário em questão poderá alterar essa informação.</p><h2>3 - Configurando o recurso</h2><p>Recurso é o nome dado para o sistema de origem/destino de onde os dados serão importados ou para onde serão publicados.</p><p><span style="line-height: 1.5;">No painel de administração do SafeID, clique em </span><strong style="line-height: 1.5;">Menu</strong><span style="line-height: 1.5;"> &gt; <b>Recurso</b></span><span style="line-height: 1.5;">&gt; <strong>Novo recurso</strong></span><strong style="line-height: 1.5;"><br /> </strong></p><p><a href="/assets/2014/04/027-recurso.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 317 172'%3E%3C/svg%3E" alt="027-recurso" data-src="/assets/2014/04/027-recurso.png" width="317" height="172" class="lazyload" data-proofer-ignore></a></p><p>Na tela de criação de recurso será necessário informar 3 campos, o primeiro é o nome do recurso, segundo é o contexto do qual ele faz parte e por último qual será o proxy que fará a comunicação entre o SafeID e este recurso.</p><h2>4 - Integrando o recurso <em>versus</em> plugin</h2><p>A tela final de configuração, também a mais complexa, contém diversos passos para que seja realizada a integração do recurso com o SafeID.</p><p>Neste passo informaremos através de qual plugin desejamos realizar a integração entre o SafeID com o recurso cadastrado no passo anterior.</p><p>Esta tela tem diversas configurações que serão explicadas uma a uma a seguir.</p><h3>4.1 - Configurações gerais</h3><p>Para criar este vínculo, clique em <strong>Menu</strong> &gt; <b>Recurso x plugin</b>&gt; <strong>Novo recurso x plugin</strong></p><p><a href="/assets/2014/04/028-recurso.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 483 307'%3E%3C/svg%3E" alt="028-recurso" data-src="/assets/2014/04/028-recurso.png" width="483" height="307" class="lazyload" data-proofer-ignore></a></p><p>Nesta tela há o início da configuração, onde existe 3 campos a serem cadastrados: O primeiro é o recurso, seguido do plugin (no nosso caso o plugin de integração com Active Directory) e por último o domínio de e-mail.</p><p>Após informar estes campos clique em <strong>Salvar e continuar</strong>.</p><p>Logo após serão exibidas diversas informações e opções de configuração, porém neste momento iremos nos ater a finalizar as configurações gerais.</p><p><a href="/assets/2014/04/008-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 481 269'%3E%3C/svg%3E" alt="008-resourceplugin" data-src="/assets/2014/04/008-resourceplugin.png" width="481" height="269" class="lazyload" data-proofer-ignore></a></p><p>Segue abaixo a explicação de cada uma destas opções:</p><ul><li><strong>Permite adição de entidade:</strong> Como <span style="line-height: 1.5;">sta integração que estamos realizando tem por objetivo capturar os usuários do CSV e importa-los no SafeID, será necessário habilitar que os dados vindos deste recurso versus plugin possa inserir entidade. Caso esta opção esteja desabilitada o SafeID não será capaz de adicionar novos usuários (Entidades), porém caso exista uma entidade que se enquadre nas regras (mapeamento de campos) que serão configuradas posteriormente, o SafeID irá criar uma nova identidade na entidade existente;</span><li><span style="line-height: 1.5;"><strong>Criação de login:</strong> Permite que o SafeID crie um login de usuário caso não exista; </span><li><strong>Criação de e-mail:</strong> Permite que o SafeID crie um e-mail de usuário caso não exista;<li><strong>Habilita importação:</strong> Habilita que o SafeID resgate dados através deste plugin.</ul><p>Após selecionas as opções desejadas clique em <strong>Salvar</strong>.</p><p>Agora clique na opção <strong>Saída</strong> e depois em <strong>Editar</strong></p><p><a href="/assets/2014/04/009-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 457 48'%3E%3C/svg%3E" alt="009-resourceplugin" data-src="/assets/2014/04/009-resourceplugin.png" width="457" height="48" class="lazyload" data-proofer-ignore></a></p><p>Realize as configurações conforme desejado e clique em <strong>Salvar</strong></p><p><a href="/assets/2014/04/029-rp.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 641 301'%3E%3C/svg%3E" alt="029-rp" data-src="/assets/2014/04/029-rp.png" width="641" height="301" class="lazyload" data-proofer-ignore></a></p><p>Para finalizar as configurações gerais clique em <strong>Campos</strong> e posteriormente <strong>Editar </strong>e configure os campos conforme abaixo e clique em <strong>Salvar</strong></p><p><a href="/assets/2014/04/011-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 578 233'%3E%3C/svg%3E" alt="011-resourceplugin" data-src="/assets/2014/04/011-resourceplugin.png" width="578" height="233" class="lazyload" data-proofer-ignore></a></p><h3>4.2 - Entendendo a tela de recurso <em>versus</em> plugin</h3><p>Nesta tela tem-se basicamente 2 quadros, o primeiro com informações das configurações e status importantes, e na segunda as configurações/ações possíveis</p><p><a href="/assets/2014/04/012-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 736 293'%3E%3C/svg%3E" alt="012-resourceplugin" data-src="/assets/2014/04/012-resourceplugin.png" width="736" height="293" class="lazyload" data-proofer-ignore></a></p><p><a style="line-height: 1.5;" href="/assets/2014/04/013-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 575 176'%3E%3C/svg%3E" alt="013-resourceplugin" data-src="/assets/2014/04/013-resourceplugin.png" width="575" height="176" class="lazyload" data-proofer-ignore></a></p><p>Segue a explicação de cada um dos itens do quadrante de informações, posteriormente realizaremos as configurações dos que ainda não realizamos:</p><ol><li>Status: Mostra o status atual deste recurso x plugin;<li>Status do recurso: Mostra o status do recurso cadastrado;<li>Status do proxy: Mostra se o proxy está online, ou seja, conectado neste momento;<li>Configurações gerais: Mostra se as configurações estão completas ou se falta algo. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente.<li>Parâmetros do plugin: Cada plugin necessita e exige uma configuração diferente, desta forma essa tela será diferente para cada um dos plugins que o sistema integra. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente.<li>Mapeamento de campos: Nesta tela que iremos efetivamente mapear os campos do sistema remoto com os campos internos do SafeID. Estes campos servem para que haja uma padronização e entendimento das informações obtidas no sistema remoto. Obrigatório estar completa para que o plugin possa ser habilitado e funcione corretamente.</ol><p>O quadrante de configurações/ações estão os links para cada uma das ações e configurações possíveis para este recurso x plugin.</p><h3>4.3 - Parâmetros do plugin</h3><p><a href="/assets/2014/04/030-rp.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 326 214'%3E%3C/svg%3E" alt="030-rp" data-src="/assets/2014/04/030-rp.png" width="326" height="214" class="lazyload" data-proofer-ignore></a></p><p>Conforme descrito anteriormente cada plugin exige uma configuração diferenciada nesta tela. Para o plugin de AD há somente 3 configurações:</p><ul><li>Servidor AD: IP ou nome do servidor AD;<li>Usuário: Usuário com direitos para criar, editar e excluir (Unidade organizacional, Grupo e usuários)<li>Senha: Senha do usuário.</ul><p>Clique em editar e configure essa tela conforme suas informações e posteriormente clique em <strong>Salvar</strong></p><h3>4.4 - Mapeamento de campos</h3><p>Para mapeamento de campos há 2 opções:</p><ul><li>O mapeamento manual onde é necessário conhecer exatamente os parâmetros (campos) do sistema que estamos integrando;<li>A opção automatizada onde o SafeID, através do seu proxy, se conecta no sistema que estamos integrando e coleta essas informações.</ul><h4><strong>Mapeamento manual</strong></h4><p><span style="line-height: 1.5;">Dentro do recurso x plugin clique no link </span><strong style="line-height: 1.5;">Mapeamento de campos, </strong><span style="line-height: 1.5;">depois no botão <strong>Editar</strong> </span></p><p><a href="/assets/2014/04/017-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 397 216'%3E%3C/svg%3E" alt="017-resourceplugin" data-src="/assets/2014/04/017-resourceplugin.png" width="397" height="216" class="lazyload" data-proofer-ignore></a></p><p>Digite o nome do campo cadastrado no SafeID e selecione o campo desejado. (Caso deseje cadastrar um novo campo basta ir em Menu &gt; Campos &gt; Novo Campo)</p><p><a href="/assets/2014/04/018-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 521 270'%3E%3C/svg%3E" alt="018-resourceplugin" data-src="/assets/2014/04/018-resourceplugin.png" width="521" height="270" class="lazyload" data-proofer-ignore></a></p><p>Ao selecionar o campo desejado as opções do campo serão exibidas. Segue a explicação de cada uma das opções do mapeamento do campo:</p><ul><li>Campo do recurso: nome do campo exatamente como o sistema integrado informa (este campo diferencia maiúsculo de minúsculo)<li>É um identificador: Indica que o campo é um identificador no sistema integrado;<li>É senha: Indica que o campo detém uma senha, ao importar a senha do usuário será sempre substituída por essa deste campo;<li>É um campo único: Indica que o campo é único, ou seja, não pode haver duplicidade dentre da base do SafeID no mesmo contexto.</ul><p>Obs.: Para que o SafeID identifique se os dados importados são de uma entidade (usuário) existente ou de uma nova entidade, ele utiliza estes campos marcados como Identificador e campo único.</p><p>Para completar a operação basta clicar em <strong>Salvar</strong></p><h4><strong>Mapeamento automatizado</strong></h4><p>Para que este mapeamento funcione corretamente as configurações gerais e os parâmetros de configuração devem estar configurados e corretos, bem como o proxy precisa estar on-line.</p><p>Dentro do recurso x plugin clique no link <strong>Mapeamento de campos, </strong>depois no botão <strong>Busca automática</strong> e depois no botão <strong>Iniciar nova busca</strong></p><p>Neste momento o procedimento de busca será iniciado e a informação de aguardando as informações do proxy será informado</p><p><a href="/assets/2014/04/020-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 644 93'%3E%3C/svg%3E" alt="020-resourceplugin" data-src="/assets/2014/04/020-resourceplugin.png" width="644" height="93" class="lazyload" data-proofer-ignore></a></p><p>Aguarde alguns instantes e atualize a tela. Caso o procedimento apresente erro uma informação de erro será exibida e os detalhes do erro poderão ser vistos no botão de Log, caso o procedimento seja realizado com sucesso a tela abaixo será exibida</p><p><a href="/assets/2014/04/021-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 638 86'%3E%3C/svg%3E" alt="021-resourceplugin" data-src="/assets/2014/04/021-resourceplugin.png" width="638" height="86" class="lazyload" data-proofer-ignore></a></p><p>Para abrir as informações mapeadas clique no botão <strong>Abrir, </strong>uma tabela com as informações mapeadas será exibida. Pode observar que além das colunas (campos do sistema) são exibidos alguns exemplos de valor do campo.</p><p><a href="/assets/2014/04/022-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 644 327'%3E%3C/svg%3E" alt="022-resourceplugin" data-src="/assets/2014/04/022-resourceplugin.png" width="644" height="327" class="lazyload" data-proofer-ignore></a></p><p>Mapeie os campos conforme desejado e clique em Salvar. Caso haja algum campo que não deseje mapear basta clicar no botão excluir que o mesmo será desconsiderado no mapeamento.</p><p>Obs.: É obrigatório a seleção de pelo menos um campo como identificador ou único.</p><p>Para o nosso exemplo o seguinte mapeamento foi realizado</p><p><a href="/assets/2014/04/023-resourceplugin.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 642 268'%3E%3C/svg%3E" alt="023-resourceplugin" data-src="/assets/2014/04/023-resourceplugin.png" width="642" height="268" class="lazyload" data-proofer-ignore></a></p><h3>4.5 - Agendamento</h3><p>Dentro do recurso x plugin clique no link <strong>Agendamento </strong>e clique no botão<strong> Editar.</strong></p><p>Cadastre o agendamento conforme a tela abaixo e clique em salvar.</p><p><a href="/assets/2014/04/024-schedule.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 337 266'%3E%3C/svg%3E" alt="024-schedule" data-src="/assets/2014/04/024-schedule.png" width="337" height="266" class="lazyload" data-proofer-ignore></a></p><h3>4.6 - Outras configurações</h3><p>De configurações obrigatórios são essas demonstradas acima, outras configurações podem ser realizadas como vínculo com função, e regras de bloqueio. Porém estas não serão abordadas neste post.</p><h3>4.7 - Habilitando recurso versus plugin</h3><p>Estando toda a configuração completa o plugin pode ser habilitado. Para isso ainda dentro do recurso x plugin clique no link <strong>Habilitar</strong>.</p><h3></h3><h2>5 - Teste de importação</h2><p>Após todas as configurações realizadas ainda dentro do recurso x plugin clique no link <strong>Publicar agora</strong>, para forçar que toda a configuração seja replicada com o proxy.<strong><br /> </strong></p><h3>5.1 - Verificando logs</h3><p>Para verificar se tudo está ocorrendo conforme desejado é possível visualizar os logs do sistema em <strong>Menu</strong> &gt; <strong>Sistema</strong> &gt; <strong>Visualizador de logs do sistema</strong></p><h3>5.1 - Visualizando usuários</h3><p>Como em nosso teste todas as importações ocorreram com sucesso podemos visualizar os dados dos usuários (Entidades e Identidades) em <strong>Menu</strong> &gt; <strong>Gerenciador de usuários</strong></p><p>Clicando em um usuário recém importado podemos observar todas suas informações.</p><p><a href="/assets/2014/04/026-user.png" class="img-link shimmer" ><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 656 354'%3E%3C/svg%3E" alt="026-user" data-src="/assets/2014/04/026-user.png" width="656" height="354" class="lazyload" data-proofer-ignore></a></p><h2>5 - Dúvidas?</h2><p>Caso tenha alguma dúvida favor entrar em contato conosco através do link <a href="www.safetrend.com.br/contato/" target="_blank">www.safetrend.com.br/contato/</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/safeid/'>SafeID</a>, <a href='/categories/safetrend/'>SafeTrend</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Integrando SafeID para importar/exportar usuários com o Active Directory - Helvio Junior&url=https://www.helviojunior.com.br/safetrend/safeid/integrando-safeid-com-ad/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Integrando SafeID para importar/exportar usuários com o Active Directory - Helvio Junior&u=https://www.helviojunior.com.br/safetrend/safeid/integrando-safeid-com-ad/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Integrando SafeID para importar/exportar usuários com o Active Directory - Helvio Junior&url=https://www.helviojunior.com.br/safetrend/safeid/integrando-safeid-com-ad/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://www.helviojunior.com.br/safetrend/safeid/integrando-safeid-com-ad/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/security/osint/localizando-ips-que-respondem-para-uma-url/">Localizando IPs que respondem para uma URL</a><li><a href="/security/osint/locating-url-ips-bypass-waf/">Locating IPs that respond to a URL</a><li><a href="/security/edr/instalando-elasticsearch-edr/">Instalando Elasticsearch EDR</a><li><a href="/it/instalando-openvpn-com-autenticacao-em-mysql/">Instalando OpenVPN com autenticação em MySQL</a><li><a href="/it/osce-osed-e-ecxd-certificacoes-de-desenvolvimento-de-exploits/">OSCE, OSED e eCXD: Certificações de desenvolvimento de Exploits</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/offensive-security/">Offensive Security</a> <a class="post-tag" href="/tags/pentest/">Pentest</a> <a class="post-tag" href="/tags/autoridade-certificadora/">autoridade certificadora</a> <a class="post-tag" href="/tags/ca/">ca</a> <a class="post-tag" href="/tags/certificate-authority/">certificate authority</a> <a class="post-tag" href="/tags/openssl/">openssl</a> <a class="post-tag" href="/tags/osce3/">OSCE3</a> <a class="post-tag" href="/tags/buffer-overflow/">Buffer Overflow</a> <a class="post-tag" href="/tags/osed/">OSED</a> <a class="post-tag" href="/tags/osee/">OSEE</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/safetrend/safeid/entendendo-o-safeid/"><div class="card-body"> <span class="timeago small" > Apr 14, 2014 <i class="unloaded">2014-04-14T18:35:48-03:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Entendendo a estrutura básica do SafeID</h3><div class="text-muted small"><p> O que é o SafeID O SafeID é um software de gestão de identidades e acessos da empresa SafeTrend (www.safetrend.com.br). Este post tem por objetivo explicar de forma rápida e simples sua estrutura b...</p></div></div></a></div><div class="card"> <a href="/safetrend/safeid/integrando-safeid-para-importar-usuarios-atraves-de-csv/"><div class="card-body"> <span class="timeago small" > Apr 15, 2014 <i class="unloaded">2014-04-15T13:00:16-03:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Integrando SafeID para importar usuários através de arquivo CSV</h3><div class="text-muted small"><p> O Objetivo deste post é demonstrar passo a passo como realizar toda a configuração do SafeID (gestão de identidades e acessos - identity and access manager) para a importação e cadastro de usuário ...</p></div></div></a></div><div class="card"> <a href="/safetrend/safeid/making-of-da-gravacao-da-apresentacao-do-safeid/"><div class="card-body"> <span class="timeago small" > Sep 23, 2014 <i class="unloaded">2014-09-23T11:36:34-03:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Making of da gravação da Apresentacao do SafeId</h3><div class="text-muted small"><p> Link do vídeo completo da apresentação: https://www.youtube.com/watch?v=zfWbPE86PP0 Neste making of eu comento sobre as dificuldades encontradas, audio, iluminação, gravação e etc. Espero que gost...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/safetrend/safeid/integrando-safeid-para-importar-usuarios-atraves-de-csv/" class="btn btn-outline-primary" prompt="Older"><p>Integrando SafeID para importar usuários através de arquivo CSV</p></a> <a href="/it/teste-de-carga-e-otimizacao-de-sites-sistemas-web/" class="btn btn-outline-primary" prompt="Newer"><p>Teste de carga e otimização de sites/sistemas web</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Integrando SafeID para importar/exportar usuários com o Active Directory'; this.page.url = 'https://www.helviojunior.com.br/safetrend/safeid/integrando-safeid-com-ad/'; this.page.identifier = '/safetrend/safeid/integrando-safeid-com-ad/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/helviojunior">Helvio junior (aka M4v3r1ck)</a>. <span data-toggle="tooltip" data-placement="top" title="Some rights reserved.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/offensive-security/">Offensive Security</a> <a class="post-tag" href="/tags/pentest/">Pentest</a> <a class="post-tag" href="/tags/autoridade-certificadora/">autoridade certificadora</a> <a class="post-tag" href="/tags/ca/">ca</a> <a class="post-tag" href="/tags/certificate-authority/">certificate authority</a> <a class="post-tag" href="/tags/openssl/">openssl</a> <a class="post-tag" href="/tags/osce3/">OSCE3</a> <a class="post-tag" href="/tags/buffer-overflow/">Buffer Overflow</a> <a class="post-tag" href="/tags/osed/">OSED</a> <a class="post-tag" href="/tags/osee/">OSEE</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.helviojunior.com.br{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
